// NABLA - a Numerical Analysis Based LAnguage

// Copyright (C) 2014 CEA/DAM/DIF
// Jean-Sylvain CAMIER - Jean-Sylvain.Camier@cea.fr

// This program is free software: you can redistribute it and/or modify
// it under the terms of the GNU General Public License as published by
// the Free Software Foundation, either version 3 of the License, or
// (at your option) any later version.

// This program is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
// GNU General Public License for more details.

// You should have received a copy of the GNU General Public License
// along with this program.  If not, see <http://www.gnu.org/licenses/>.
// See the LICENSE file for details.

// ****************************************************************************
// * MÃ P Quit
// ****************************************************************************
void dumpExit(void) @ 50.0{
  if (!option_only_one_iteration) return;
  info()<<"[1;7;31mExiting after first iteration![0m";
  exit;
}


// ****************************************************************************
// * Test for Quit
// ****************************************************************************
void testForQuit(void) @ 50.0{
  if (GlobalIteration >= option_max_iterations) exit;
}


// ********************************************************
// * testForSlurm
// ********************************************************
void testForSlurm(void) @ 51.0{
  const Integer tlimit=time limit;
  const Integer tremain=time remain;
  info()<<"\33[43;30m#"<<GlobalIteration<<", remaining "
        << tremain << "/" <<tlimit <<"(s)\33[m";
  // Si le temps restant est infÃ©rieur Ã  notre borne, on sort
  if (tremain < option_slurm_tremain){
    info()<<"\33[43;30m#"<<GlobalIteration<<" now EXITing! ("
          << tremain << "<" <<option_slurm_tremain<<"(s))\33[m";
    exit;
  }
}

